<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4CAF50">
  <meta name="description" content="Smart shopping list with voice input and cloud sync">
  <title>Shopping List</title>
  <link rel="stylesheet" href="src/css/styles.css">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="src/assets/icons/icon-192x192.png">
</head>

<body>
  <div id="app">
    <!-- Header -->
    <header>
      <div class="header-content">
        <h1>üõí Shopping List</h1>
        <div class="header-actions">
          <button id="refreshBtn" class="icon-btn" title="Refresh">
            <svg class="icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8c2.87 0 5.39 1.52 6.8 3.8L16 10h6V4l-2.24 2.24C18.07 3.95 15.25 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10c4.42 0 8.14-2.87 9.44-6.83l-1.94-.59C18.5 17.72 15.53 20 12 20z" fill="white"/>
            </svg>
          </button>
          <button id="settingsBtn" class="icon-btn" title="Settings">
            <svg class="icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94L14.4 2.81c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z" fill="white"/>
            </svg>
          </button>
          <button id="logoutBtn" class="icon-btn" title="Logout">
            <svg class="icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5 21C4.45 21 3.979 20.804 3.587 20.412C3.195 20.020 2.99934 19.5493 3 19V5C3 4.45 3.196 3.979 3.588 3.587C3.98 3.195 4.45067 2.99934 5 3H12V5H5V19H12V21H5ZM16 17L14.625 15.55L17.175 13H9V11H17.175L14.625 8.45L16 7L21 12L16 17Z" fill="white"/>
            </svg>
          </button>
        </div>
      </div>
      <div id="statusBar" class="status-bar hidden">
        <span id="statusText"></span>
      </div>
    </header>

    <!-- Auth Section -->
    <div id="authSection" class="auth-section">
      <div class="auth-card">
        <h2>Welcome!</h2>
        <p>Sign in with Google to sync your shopping list</p>
        <button id="signInBtn" class="primary-btn">Sign In with Google</button>
      </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
      <!-- Add Item Section -->
      <section class="add-item-section">
        <div class="input-group">
          <input type="text" id="itemInput" placeholder="Add an item..." autocomplete="off" />
          <button id="voiceBtn" class="icon-btn voice-btn" title="Voice input">
            <span class="icon">üé§</span>
          </button>
          <button id="cameraBtn" class="icon-btn" title="Scan list">
            <span class="icon">üì∑</span>
          </button>
        </div>
        <div class="category-select-group">
          <select id="categorySelect">
            <option value="">Select category...</option>
          </select>
          <button id="addItemBtn" class="primary-btn" disabled>Add</button>
        </div>
      </section>

      <!-- Shopping List -->
      <section class="shopping-list">
        <div class="list-header">
          <button id="clearCheckedBtn" class="secondary-btn hidden" title="Clear all checked items">
            <span class="icon">üóëÔ∏è</span> Clear Checked
          </button>
        </div>
        <div id="listContainer">
          <!-- Items will be dynamically inserted here -->
        </div>
        <div id="emptyState" class="empty-state">
          <p>üéâ Your list is empty!</p>
          <p class="text-muted">Add items to get started</p>
        </div>
      </section>
    </div>

    <!-- Category Management Modal -->
    <div id="categoryModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Manage Categories</h2>
          <button class="close-btn" id="closeCategoryModal">√ó</button>
        </div>
        <div class="modal-body">
          <div class="category-form">
            <input type="text" id="newCategoryName" placeholder="New category name">
            <input type="number" id="newCategoryOrder" placeholder="Store order" min="1">
            <button id="addCategoryBtn" class="primary-btn">Add Category</button>
          </div>
          <div id="categoryList" class="category-list">
            <!-- Categories will be listed here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Item Modal -->
    <div id="editModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Edit Item</h2>
          <button class="close-btn" id="closeEditModal">√ó</button>
        </div>
        <div class="modal-body">
          <div class="edit-form">
            <label for="editItemInput">Item Name</label>
            <input type="text" id="editItemInput" placeholder="Item name">

            <label for="editCategorySelect">Category</label>
            <select id="editCategorySelect">
              <option value="">Select category...</option>
            </select>

            <button id="saveEditBtn" class="primary-btn">Save Changes</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Photo OCR Modal -->
    <div id="ocrModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Add Items from Photo</h2>
          <button class="close-btn" id="closeOcrModal">√ó</button>
        </div>
        <div class="modal-body">
          <input type="file" id="photoInput" accept="image/*" capture="environment" class="hidden">
          <div id="ocrPreview" class="ocr-preview hidden">
            <img id="previewImage" alt="Captured image">
          </div>
          <button id="selectPhotoBtn" class="primary-btn">Select Photo</button>
          <div id="ocrLoading" class="hidden">
            <div class="spinner"></div>
            <p>Processing image...</p>
          </div>
          <div id="ocrResults" class="ocr-results hidden">
            <!-- OCR results will appear here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Voice Listening Indicator -->
    <div id="voiceIndicator" class="voice-indicator hidden">
      <div class="pulse-ring"></div>
      <span class="icon">üé§</span>
      <p>Listening...</p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="src/js/config.js"></script>
  <script src="src/js/sheets.js"></script>
  <script src="src/js/categories.js"></script>
  <script src="src/js/voice.js"></script>
  <script src="src/js/vision.js"></script>
  <script src="src/js/ui.js"></script>
  <script src="src/js/app.js"></script>
</body>

</html>
