<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4CAF50">
  <meta name="description" content="Smart shopping list with voice input and cloud sync">
  <title>Shopping List</title>
  <link rel="stylesheet" href="src/css/styles.css">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="src/assets/icons/icon-192x192.png">
</head>

<body>
  <div id="app">
    <!-- Header -->
    <header>
      <div class="header-content">
        <h1>üõí Shopping List</h1>
        <div class="header-actions">
          <button id="refreshBtn" class="icon-btn" title="Refresh">
            <span class="icon">üîÑ</span>
          </button>
          <button id="settingsBtn" class="icon-btn" title="Settings">
            <svg class="icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.875 22h-3.75l-.378-2.85c-.3-.1-.588-.238-.863-.413-.275-.175-.537-.375-.787-.6l-2.7 1.125-1.875-3.262 2.325-1.763c-.05-.325-.075-.638-.075-.938 0-.3.025-.612.075-.937l-2.325-1.763 1.875-3.262 2.7 1.125c.25-.225.512-.425.787-.6.275-.175.563-.313.863-.413L10.125 2h3.75l.378 2.85c.3.1.588.238.863.413.275.175.537.375.787.6l2.7-1.125 1.875 3.262-2.325 1.763c.05.325.075.637.075.937 0 .3-.025.613-.075.938l2.325 1.762-1.875 3.263-2.7-1.126c-.25.226-.512.426-.787.601-.275.175-.563.313-.863.413L13.875 22zM12 15.5c.967 0 1.792-.342 2.475-1.025.683-.683 1.025-1.508 1.025-2.475 0-.967-.342-1.792-1.025-2.475C13.792 8.842 12.967 8.5 12 8.5c-.967 0-1.792.342-2.475 1.025C8.842 10.208 8.5 11.033 8.5 12c0 .967.342 1.792 1.025 2.475C10.208 15.158 11.033 15.5 12 15.5z" fill="white"/>
            </svg>
          </button>
          <button id="logoutBtn" class="icon-btn" title="Logout">
            <svg class="icon-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5 21C4.45 21 3.979 20.804 3.587 20.412C3.195 20.020 2.99934 19.5493 3 19V5C3 4.45 3.196 3.979 3.588 3.587C3.98 3.195 4.45067 2.99934 5 3H12V5H5V19H12V21H5ZM16 17L14.625 15.55L17.175 13H9V11H17.175L14.625 8.45L16 7L21 12L16 17Z" fill="white"/>
            </svg>
          </button>
        </div>
      </div>
      <div id="statusBar" class="status-bar hidden">
        <span id="statusText"></span>
      </div>
    </header>

    <!-- Auth Section -->
    <div id="authSection" class="auth-section">
      <div class="auth-card">
        <h2>Welcome!</h2>
        <p>Sign in with Google to sync your shopping list</p>
        <button id="signInBtn" class="primary-btn">Sign In with Google</button>
      </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
      <!-- Add Item Section -->
      <section class="add-item-section">
        <div class="input-group">
          <input type="text" id="itemInput" placeholder="Add an item..." autocomplete="off" />
          <button id="voiceBtn" class="icon-btn voice-btn" title="Voice input">
            <span class="icon">üé§</span>
          </button>
          <button id="cameraBtn" class="icon-btn" title="Scan list">
            <span class="icon">üì∑</span>
          </button>
        </div>
        <div class="category-select-group">
          <select id="categorySelect">
            <option value="">Select category...</option>
          </select>
          <button id="addItemBtn" class="primary-btn" disabled>Add</button>
        </div>
      </section>

      <!-- Shopping List -->
      <section class="shopping-list">
        <div class="list-header">
          <button id="clearCheckedBtn" class="secondary-btn hidden" title="Clear all checked items">
            <span class="icon">üóëÔ∏è</span> Clear Checked
          </button>
        </div>
        <div id="listContainer">
          <!-- Items will be dynamically inserted here -->
        </div>
        <div id="emptyState" class="empty-state">
          <p>üéâ Your list is empty!</p>
          <p class="text-muted">Add items to get started</p>
        </div>
      </section>
    </div>

    <!-- Category Management Modal -->
    <div id="categoryModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Manage Categories</h2>
          <button class="close-btn" id="closeCategoryModal">√ó</button>
        </div>
        <div class="modal-body">
          <div class="category-form">
            <input type="text" id="newCategoryName" placeholder="New category name">
            <input type="number" id="newCategoryOrder" placeholder="Store order" min="1">
            <button id="addCategoryBtn" class="primary-btn">Add Category</button>
          </div>
          <div id="categoryList" class="category-list">
            <!-- Categories will be listed here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Item Modal -->
    <div id="editModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Edit Item</h2>
          <button class="close-btn" id="closeEditModal">√ó</button>
        </div>
        <div class="modal-body">
          <div class="edit-form">
            <label for="editItemInput">Item Name</label>
            <input type="text" id="editItemInput" placeholder="Item name">

            <label for="editCategorySelect">Category</label>
            <select id="editCategorySelect">
              <option value="">Select category...</option>
            </select>

            <button id="saveEditBtn" class="primary-btn">Save Changes</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Photo OCR Modal -->
    <div id="ocrModal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Add Items from Photo</h2>
          <button class="close-btn" id="closeOcrModal">√ó</button>
        </div>
        <div class="modal-body">
          <input type="file" id="photoInput" accept="image/*" capture="environment" class="hidden">
          <div id="ocrPreview" class="ocr-preview hidden">
            <img id="previewImage" alt="Captured image">
          </div>
          <button id="selectPhotoBtn" class="primary-btn">Select Photo</button>
          <div id="ocrLoading" class="hidden">
            <div class="spinner"></div>
            <p>Processing image...</p>
          </div>
          <div id="ocrResults" class="ocr-results hidden">
            <!-- OCR results will appear here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Voice Listening Indicator -->
    <div id="voiceIndicator" class="voice-indicator hidden">
      <div class="pulse-ring"></div>
      <span class="icon">üé§</span>
      <p>Listening...</p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="src/js/config.js"></script>
  <script src="src/js/sheets.js"></script>
  <script src="src/js/categories.js"></script>
  <script src="src/js/voice.js"></script>
  <script src="src/js/vision.js"></script>
  <script src="src/js/ui.js"></script>
  <script src="src/js/app.js"></script>
</body>

</html>
